#+title: confluence2html TODOs
#+author: Rich Loveland
#+email: r@rmloveland.com

* TODO Get 'mailto' links to work

* TODO Make image directory a flag

  e.g., '--image-dir ~/public_html/img'

* TODO Make base URI for wiki links a flag

  e.g., '--base-uri "http://example.com"'

* TODO Cherry-pick random bugfixes from alternate branches

* TODO Come up with a new name (derived from Confluence?)

  Start by looking at some synonyms. This will serve two purposes:

  - Avoid entanglements with Atlassian
  - Provide freedom/flexibility to extend the syntax (or at least to
    support only the minimal subset that we do)

   
  A few possibilities:

  - Conflux
  - Concursion
  - Concurrence
  - Assemblage

* TODO Decide on a license for this code
  
* TODO Note ALL of the differences with Confluence markup in POD

  - Cannot use any special formatting or links in h{1-6} headers
  - No space keys are allowed in links (since spaces are not supported)
  - Must put macro tags on own line, e.g., `{info}'
  - No ``arguments'' for macros are supported
  - No bold items in itemized lists, e.g., `* *First*: ...'
  - No support for `\\'
  - Need to wrap tables in `{table-plus}'
  - `toc' macro subset is working (minlevel, maxlevel, exclude -- in
    that order)
  - Links do not automatically have line breaks inserted
    afterward. This is to allow you to embed these links in regular
    text. If you want to use them as subheaders, make a bulleted list.

* TODO Make this a module

  At least for the time being. Speed is not a *major* concern (yet),
  but at the same time slow software sucks.

* TODO Generate a parse tree/AST that can be re-used?

  Idea, Tue Nov 5 09:11:42 2013: What if, instead of generating HTML
  straightaway, we dynamically write the text of a Perl data
  structure, which we then read in using EVAL?

* TODO Add more unit tests

  Some of the edge cases we need to test for:

  - [ ] Macro usage inside table cells (info, tip, note, warning, code)
  - [ ] Formatting inside table cells (monospace, italic, bold)
  - [ ] Correctly wrap paragraphs, even if those paragraphs already
    contain elements of wiki markup that have already been processed
    (i.e., that are already HTML)

* TODO Refactor this ugly bastard

  There are lots of substeps needed here; here's a list:

  - [ ] Extract common regular expressions into variables

* TODO Implement blockquotes

  Note that this will make this ``not a proper subset'' of Confluence
  markup.

* TODO Implement toggle-able pretty-printing

  This will ease testing.

* TODO Implement underlining

* TODO Implement ordered lists

  Right now we just turn them into unordered lists. This should be fixed.

* TODO Can't link to headers in another page

  I think the solution will be to transform

  [Network Analytics|Network Reporting#Network Analytics Report]

  to

  <a href="network-reporting.html#Network Analytics Report">Network Analytics</a>

* TODO Make this a proper package

  - Maybe even rewrite using Moo*?
    - Probably too slow -- this is called a lot!
    - Then again, if we're generating ASTs...

* DONE Wrap list items in UL tags

  This may require an output processing step.  (Geez, maybe you should
  write a real parser, ya bum?)

* DONE Implement `toc' macro

  Supported syntax:
  `{toc:minlevel=3|maxlevel=4|exclude=Related.*}'
  
* DONE Add command line options

  | Option       | Behavior                                             | Done? |
  |--------------+------------------------------------------------------+-------|
  | --wrap       | whether to wrap page in outer `html' and `body' tags |       |
  | --stylesheet | location of the stylesheet to use                    | X     |
  |              |                                                      |       |

* DONE Update build script to massage the Markdown

   1. Relative image links in Markdown

      perl -p -i.bak -e 's{!\[\]\(}{![](img/}g' *.markdown
   

   2. Link to Markdown, not HTML

      perl -p -i.bak -e 's{\.html}{\.markdown}g' *.markdown

* DONE Fix bug where ', in a list element causes a line break

  More precisely, the regex stops matching at those characters and
  wraps its match thus far in tags.

* DONE Implement `htmlcomment' macro

* DONE Evaluate options other than Markdown

  Realizing it's not too, er, featureful...

* DONE Can't do relative links in same page

  See SDK troubleshooting page's links to iOS and Android tables

  Resolution: there was a space at the end of the header name. This is not allowed.
